<div class="card card-todo border-0 rounded-4 mb-3 ps-3 <%= 'opacity-75 bg-light' if todo.completed? %>" id="<%= dom_id(todo) %>">
  <div class="card-body p-3 d-flex align-items-center">
    
    <!-- Checkbox / Status -->
    <div class="me-3">
      <%= button_to toggle_todo_path(todo), 
          method: :patch, 
          class: "btn btn-icon p-0 border-0 #{todo.completed? ? 'text-success' : 'text-muted-light'}",
          form: { data: { turbo_frame: "_top" } },
          style: "box-shadow: none;" do %>
        <% if todo.completed? %>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-success"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
        <% else %>
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-muted"><circle cx="12" cy="12" r="10"></circle></svg>
        <% end %>
      <% end %>
    </div>

    <!-- Content -->
    <div class="flex-grow-1" style="min-width: 0;">
      <h6 class="mb-0 fw-semibold <%= 'text-decoration-line-through text-muted' if todo.completed? %> text-truncate">
        <%= todo.title %>
      </h6>
      <% if todo.description.present? %>
        <p class="mb-0 small text-muted text-truncate" style="max-width: 90%;">
          <%= todo.description %>
        </p>
      <% end %>
    </div>
    
    <!-- Actions -->
    <div class="d-flex align-items-center gap-1 opacity-50 hovered-opacity-100">
      <%= link_to edit_todo_path(todo), class: "btn btn-icon text-muted btn-light rounded-circle shadow-none", title: "Edit" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
      <% end %>
      
      <%= button_to todo, method: :delete, class: "btn btn-icon text-danger btn-light rounded-circle shadow-none", form: { data: { turbo_confirm: "Are you sure?" } }, title: "Delete" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
      <% end %>
    </div>

  </div>
</div>
